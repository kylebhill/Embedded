/*
 * Lab 3.c
 *
 * Created: 9/25/2020 12:20:04 PM
 * Author : kyle0
 */ 

#define F_CPU 16000000UL  // 16MHz clock from the debug processor
#include <avr/io.h>
#include <util/delay.h>
#define row 4
#define col 4


// function to initialize UART
void USART_Init(void)
{
	UBRR0H = 0;
	UBRR0L = 103;
	UCSR0B |= (1<<RXEN0);          //Enable Receiver
	UCSR0B |= (1<<TXEN0);          //Enable Transmitter
	UCSR0C &= ~(0<<USBS0);      //Set to  1-stop bit
	UCSR0C |= (3<<UCSZ00);       //Set to 8 data bits
}

void uart_transmit (unsigned char data[row][col], int r, int j) {
	while (!( UCSR0A & (1<<UDRE0))); // wait while register is free
	UDR0 = data[r][j]; // load data in the register
}

int main(void)
{
	unsigned char pad[row][col] = {
		{'1','2','3','A'},
		{'4','5','6','B'},
		{'7','8','9','C'},
		{'*','0','#','D'}
		};
	int r;
	int c;
	DDRD |= (1<<DDD1);
	USART_Init();
	while(1)
	{
		for (r=0; r<=4; r++)
		{
			for(c=0; c<=4; c++)
			{
				uart_transmit(pad, r, c);
			}
		}
		_delay_ms(500);
	}
}